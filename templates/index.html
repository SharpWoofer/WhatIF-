<!DOCTYPE html>
<html>
<head>
    <title>Trending Movies</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index.css') }}">
</head>
<body>
    <div class="outer-container">
        <div class="container">
            <img src="{{ url_for('static', filename='images/cinema.jpg') }}" alt="Cinema Image">
            <h1>Welcome to <i>What-If</i>, where you can re-write your favourite movies with a click of a button! Our website allows you to responsively search for your desired movie, and our Generative AI model will generate a fresh, alternative plot for you.</h1>
            <h2>You can search with the following top 10 movies listed, or input your own movie in the search box below.</h2><br>
            <ul class="movie-list">
                {% for index in range(trending_movies|length) %}
                    {% set movie = trending_movies[index] %}
                    <li>
                        <div class="movie-info">
                            <div class="title">{{ movie['title'] }}</div>
                        </div>
                        <div class="rank-container">
                            <div class="rank">#{{ index + 1 }}</div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
            <h2>Search for a movie</h2>
            <form method="post" action="/generate_plot">
                <input type="text" id="movieTitleInput" name="movie_title" placeholder="Type to search..." autocomplete="off">
                <div id="autocompleteList" class="autocomplete-items"></div>
                <button type="submit">Generate Plot</button>
            </form>
        </div>
    </div>
        <script src="{{ url_for('static', filename='autocomplete.js') }}"></script>
        <script>
            let scrollAmount = 0;
            const carousel = document.querySelector('.carousel');
            setInterval(() => {
                if(scrollAmount < carousel.scrollWidth - carousel.clientWidth) {
                    scrollAmount += 200; // Scroll by 200px every 2 seconds
                } else {
                    scrollAmount = 0; // Reset scroll amount to start
                }
                carousel.scrollTo({left: scrollAmount, behavior: 'smooth'});
            }, 2000);
        </script>
        <script src="{{ url_for('static', filename='carousel.js') }}"></script>
</body>
</html>